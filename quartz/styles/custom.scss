@use "./base.scss";

/*
Zenn-inspired Dark Theme for Quartz
Based on Zenn's dark-blue color scheme
https://zenn.dev
*/

// Hide footer
footer {
  display: none !important;
}

// Scrap Notes logo styling with white color and geometric font
.page-title {
  font-family: 'Futura', 'Century Gothic', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif !important;
  font-weight: 700 !important;
  letter-spacing: 0.02em !important;
  font-size: 1.75rem !important;
  color: var(--tx1) !important;
  text-transform: none !important;

  a {
    color: var(--tx1) !important;

    &:hover {
      opacity: 0.8;
    }
  }
}

// Light mode color scheme
[saved-theme="light"] {
  --bg1: #FFF;
  --bg2: #F5F5F5;
  --bg3: #E5E5E5;
  --bg4: #FAFAFA;  // Article content background
  --ui1: #E6E6E6;
  --ui2: #D6D6D6;
  --ui3: #C2C2C2;
  --tx1: #0F0F0F;
  --tx2: #767676;
  --tx3: #B5B5B5;
  --ax1: #607987;
  --ax2: #556B77;
  --ax3: #889EAA;
  --hl1: hsla(201,50%,40%,30%);

  color: var(--tx1);
  background: var(--bg1);

  h1, h2, h3, h4, h5, h6 {
    color: var(--tx1);
  }

  pre {
    background-color: var(--bg2) !important;
  }

  :not(pre) > code {
    background-color: var(--ui1) !important;
    color: var(--tx1) !important;
  }

  // Article title - centered and large
  .page-header .article-title {
    text-align: center;
    font-size: 2.2rem;
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 0.5rem;
    color: var(--tx1) !important;

    @media (max-width: 768px) {
      font-size: 1.6rem;
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Article metadata - small and centered
  .page-header .content-meta {
    text-align: center;
    font-size: 0.85rem;
    color: var(--tx3);
    margin-bottom: 1rem;

    @media (max-width: 768px) {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Article page tags - left aligned with bottom margin
  .page-header .tags {
    justify-content: flex-start;
    margin-bottom: 1rem;

    @media (max-width: 768px) {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Article content area - card design
  .center > article {
    background-color: var(--bg4) !important;
    border: 1px solid var(--ui2) !important;
    border-radius: 8px;
    padding: 2rem;

    @media (max-width: 768px) {
      padding: 1rem 0;
      border-radius: 0;
      border-left: none;
      border-right: none;
    }

    // Main text color
    & > p, & > ul > li, & > ol > li, & > blockquote, & > div:not(figure) {
      color: var(--tx1) !important;
    }

    // Headings
    h1, h2, h3, h4, h5, h6 {
      color: var(--tx1) !important;
    }

    // Links
    a {
      color: var(--ax1) !important;
      text-decoration: none;

      &:hover {
        color: var(--ax3) !important;
      }
    }

    // Mobile: add minimal padding to text elements
    @media (max-width: 768px) {
      & > p, & > ul, & > ol, & > blockquote, & > div:not(figure) {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }

      h1, h2, h3, h4, h5, h6 {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }
    }

    // Code blocks
    figure[data-rehype-pretty-code-figure] {
      border: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    pre {
      border: none !important;
      border-radius: 0 !important;
      padding: 0 !important;
      margin: 0 !important;
      overflow-x: auto;
    }

    // Inline code
    :not(pre) > code {
      background-color: var(--ui1) !important;
      color: var(--tx1) !important;
      padding: 0.2em 0.4em;
      border-radius: 4px;
      font-size: 0.9em;
    }
  }

  // Graph view - same style as article
  .graph-outer,
  .global-graph-container {
    background-color: var(--bg4) !important;
    border: 1px solid var(--ui2) !important;
    border-radius: 8px;
  }
}

[saved-theme="dark"] {
  // Zenn dark-blue theme - color palette
  --bg1: #081d35;         // Page background (darkest blue)
  --bg2: #0d223a;         // Unused (reserved)
  --bg3: #162c49;         // Hover background
  --bg4: #151e2c;         // Article content background
  --bg5: #0b2c53;         // Code block background
  --ui1: #1b324a;         // Border light
  --ui2: #2e445c;         // Border medium
  --ui3: #344c69;         // Border dark
  --tx1: #ecf5ff;         // Primary text
  --tx2: #a4bcd5;         // Secondary text
  --tx3: #7a9cc6;         // Tertiary text
  --ax1: #3ea8ff;         // Zenn blue (primary accent)
  --ax2: #0f83fd;         // Link color
  --ax3: #0868ce;         // Hover accent
  --hl1: rgba(62, 168, 255, 0.2); // Highlight background

  color: var(--tx1);
  background: var(--bg1);

  h1, h2, h3, h4, h5, h6 {
    color: var(--tx1);
  }

  pre {
    background-color: var(--bg5) !important;
  }

  :not(pre) > code {
    background-color: var(--bg3) !important;
    color: var(--tx1) !important;
  }

  // Article title - Zenn style (large and centered)
  .page-header .article-title {
    text-align: center;
    font-size: 2.2rem;
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: 0.5rem;
    color: var(--tx1) !important;

    @media (max-width: 768px) {
      font-size: 1.6rem;
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Article metadata - small and centered
  .page-header .content-meta {
    text-align: center;
    font-size: 0.85rem;
    color: var(--tx3);
    margin-bottom: 1rem;

    @media (max-width: 768px) {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Tags styling - consistent across folder and article pages
  .page-header .tags,
  .page-listing .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin: 0;
    padding: 0;
    list-style: none;

    li {
      margin: 0;

      a {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        background-color: var(--ui1);
        color: var(--tx2);
        font-size: 0.8rem;
        border-radius: 4px;
        text-decoration: none;
        transition: all 0.2s ease;

        &:hover {
          background-color: var(--ax1);
          color: var(--tx1);
        }
      }
    }
  }

  // Article page tags - left aligned with bottom margin
  .page-header .tags {
    justify-content: flex-start;
    margin-bottom: 1rem;

    @media (max-width: 768px) {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Article content area - Zenn-style card design
  .center > article {
    background-color: var(--bg4) !important;
    border: 1px solid var(--ui2) !important;
    border-radius: 8px;
    padding: 2rem;

    @media (max-width: 768px) {
      padding: 1rem 0;
      border-radius: 0;
      border-left: none;
      border-right: none;
    }

    // Main text color - white/light for readability
    & > p, & > ul > li, & > ol > li, & > blockquote, & > div:not(figure) {
      color: var(--tx1) !important;
    }

    // Headings
    h1, h2, h3, h4, h5, h6 {
      color: var(--tx1) !important;
    }

    // Mobile: add minimal padding to text elements
    @media (max-width: 768px) {
      & > p, & > ul, & > ol, & > blockquote, & > div:not(figure) {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }

      h1, h2, h3, h4, h5, h6 {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }
    }

    // Links - Zenn blue
    a {
      color: var(--ax1) !important;
      text-decoration: none;

      &:hover {
        color: var(--ax3) !important;
      }
    }

    // Code blocks - preserve syntax highlighting
    figure[data-rehype-pretty-code-figure] {
      border: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    pre {
      border: none !important;
      border-radius: 0 !important;
      padding: 0 !important;
      margin: 0 !important;
      overflow-x: auto;
    }

    // Inline code (not in pre blocks)
    :not(pre) > code {
      background-color: var(--bg3) !important;
      color: var(--tx1) !important;
      padding: 0.2em 0.4em;
      border-radius: 4px;
      font-size: 0.9em;
    }
  }

  // Graph view - same style as article
  .graph-outer,
  .global-graph-container {
    background-color: var(--bg4) !important;
    border: 1px solid var(--ui2) !important;
    border-radius: 8px;
  }
}

// Typography settings
body {
  --font-text-size: 16px;
  --font-small: 13px;
  --font-smaller: 11px;
  --font-smallest: 10px;

  --normal-weight: 400;
  --bold-weight: 600;

  --h1: 1.125em;
  --h2: 1.05em;
  --h3: 1em;
  --h4: 0.90em;
  --h5: 0.85em;
  --h6: 0.85em;

  --h1-weight: 600;
  --h2-weight: 600;
  --h3-weight: 500;
  --h4-weight: 500;
  --h5-weight: 500;
  --h6-weight: 400;

  --image-radius: 8px;
  --border-width: 1px;
}

// Headings
h1 {
  font-size: var(--h1);
  font-weight: var(--h1-weight);
}

h2 {
  font-size: var(--h2);
  font-weight: var(--h2-weight);
}

h3 {
  font-size: var(--h3);
  font-weight: var(--h3-weight);
}

h4 {
  font-size: var(--h4);
  font-weight: var(--h4-weight);
}

h5 {
  font-size: var(--h5);
  font-weight: var(--h5-weight);
}

h6 {
  font-size: var(--h6);
  font-weight: var(--h6-weight);
}

// Images
img {
  border-radius: var(--image-radius);
}

// Links
a {
  font-weight: var(--normal-weight);

  &:hover {
    opacity: 0.8;
  }
}

// Code
code {
  font-size: 0.85em;
}

// Lists
ol > li::marker,
ul > li::marker {
  color: var(--tx3);
}

// Tables - clean minimal style
table {
  border: var(--border-width) solid var(--ui1);
  border-collapse: collapse;

  th, td {
    padding: 4px 10px;
    border: none;
  }

  thead {
    border-bottom: var(--border-width) solid var(--ui2);
  }

  tbody tr {
    border-bottom: var(--border-width) solid var(--ui1);

    &:last-child {
      border-bottom: none;
    }

    &:hover {
      background-color: var(--bg2);
    }
  }
}

// Explorer title - slightly bigger than TOC, normal weight
.explorer .title-button h2 {
  font-size: 0.85rem !important;
  font-weight: 400 !important;
}

// Explorer font size - slightly larger (0.8rem)
.folder-container {
  & div > a {
    font-size: 0.8rem !important; // Folder names
    line-height: 1.3rem !important;

    @media (max-width: 768px) {
      font-size: 0.9rem !important;
      line-height: 1.5rem !important;
    }
  }

  & div > button span {
    font-size: 0.8rem !important; // Folder button text
    line-height: 1.3rem !important;

    @media (max-width: 768px) {
      font-size: 0.9rem !important;
      line-height: 1.5rem !important;
    }
  }
}

.explorer-content ul li > a {
  font-size: 0.8rem !important; // File names
  line-height: 1.3rem !important;

  @media (max-width: 768px) {
    font-size: 0.9rem !important;
    line-height: 1.5rem !important;
  }
}

// Folder page horizontal card layout
.page-listing {
  margin-top: 2rem;

  // Count text styling
  & > p {
    color: var(--tx2);
    font-size: 0.9rem;
    margin-bottom: 1.5rem;

    @media (max-width: 768px) {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  // Single column layout
  ul.section-ul {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  // Horizontal card styling for each item
  li.section-li {
    margin: 0;

    & > .section {
      display: grid;
      grid-template-columns: 1fr auto;
      grid-template-rows: auto auto;
      gap: 0.5rem 1rem;
      background-color: var(--bg3);
      border: 1px solid var(--ui1);
      border-radius: 8px;
      padding: 1rem 1.5rem;
      transition: all 0.2s ease;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
        padding: 1rem 0;
        border-radius: 0;
        border-left: none;
        border-right: none;
      }

      &:hover {
        background-color: var(--bg2);
        border-color: var(--ui2);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        transform: translateX(4px);
      }

      // Title (row 1, col 1)
      & > .desc {
        grid-column: 1;
        grid-row: 1;

        h3 {
          margin: 0;
          font-size: 1.05rem;
          font-weight: 600;
          line-height: 1.4;

          a {
            color: var(--tx1);
            text-decoration: none;
            transition: color 0.2s ease;

            &:hover {
              color: var(--ax1);
            }
          }
        }

        @media (max-width: 768px) {
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }
      }

      // Date (row 1, col 2)
      & > .meta {
        grid-column: 2;
        grid-row: 1;
        margin: 0;
        opacity: 0.7;
        font-size: 0.85rem;
        color: var(--tx3);
        text-align: right;
        align-self: center;

        @media (max-width: 768px) {
          grid-column: 1;
          grid-row: 2;
          text-align: left;
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }
      }

      // Tags (row 2, col 1-2)
      & > .tags {
        grid-column: 1 / -1;
        grid-row: 2;
        justify-content: flex-start;
        display: flex !important;
        flex-wrap: wrap;
        gap: 0.5rem;

        @media (max-width: 768px) {
          display: flex !important;
          grid-row: 3;
          grid-column: 1;
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }
      }
    }
  }
}
